import { useState } from 'react'
import { WorkshopColumns } from '../components/playground/WorkshopColumns.jsx'

export const meta = {
  title: 'Hidden vs Display vs Visibility',
  summary: 'Three ways to hide elements and how each affects layout, rendering, and events.',
  tech: 'HTML',
  slug: '/hidden-display-visibility',
  type: 'Lab',
  tags: ['layout', 'visibility', 'html'],
}

# Hidden vs Display vs Visibility

<div className="card-strong px-6 py-5 mb-6">
  <p className="section-header mb-2">TL;DR</p>
  <p className="prose-lead">
    `display: none` removes the element from layout and events. `visibility: hidden` keeps the space but blocks rendering
    and events. The HTML `hidden` attribute is a semantic toggle that also hides the element. Use the lab below to see the
    differences live.
  </p>
  <div className="mt-3 flex gap-2 flex-wrap">
    <span className="px-3 py-1 text-xs rounded-full bg-white/10 text-indigo-100 border border-white/10">Layout</span>
    <span className="px-3 py-1 text-xs rounded-full bg-white/10 text-indigo-100 border border-white/10">Rendering</span>
    <span className="px-3 py-1 text-xs rounded-full bg-white/10 text-indigo-100 border border-white/10">HTML</span>
  </div>
</div>

export const ConceptCard = ({ tight = false }) => (
  <div className={`card-surface ${tight ? 'px-3 py-4' : 'px-4 sm:px-6 py-5'} space-y-4 h-full`}>
    <div>
      <p className="section-header mb-2">Concept</p>
      <h2 className="text-2xl font-semibold text-slate-900 mb-2">Hidden vs Display vs Visibility</h2>
      <p className="prose-lead">
        The three hiding strategies differ in how they affect layout, rendering, and event handling. Read the notes, then
        adjust the code and preview side by side to feel the differences.
      </p>
    </div>
    <div className="space-y-2">
      <p className="section-header">Key differences</p>
      <ul className="text-slate-700 leading-7 space-y-2">
        <li>
          <code>display: none</code>: element is removed from layout; no space, no rendering, no events.
        </li>
        <li>
          <code>visibility: hidden</code>: keeps layout space; hidden visually; events blocked.
        </li>
        <li>
          <code>hidden</code> attribute: semantic toggle at HTML level; behaves similar to `display: none`.
        </li>
      </ul>
    </div>
    <div className="space-y-2">
      <p className="section-header">What you’ll learn</p>
      <ol className="text-slate-700 leading-7 space-y-2 list-decimal list-inside">
        <li>Layout impact when removing vs keeping space.</li>
        <li>When to combine visibility with opacity/animation for smoother UX.</li>
        <li>Choosing the right strategy for accessibility and layout stability.</li>
      </ol>
    </div>
  </div>
)

export const LabLayout = () => {
  const [showCode, setShowCode] = useState(false)
  const isCode = showCode
  const gridTemplate = isCode ? '1.2fr 1.1fr 0.8fr' : '1.5fr 0.8fr'

  return (
    <div className="space-y-4">
      <div className="flex items-center justify-end gap-2">
        <button
          onClick={() => setShowCode(false)}
          className={`px-3 py-1.5 text-sm rounded-lg border transition ${
            !showCode ? 'bg-emerald-50 border-emerald-200 text-emerald-700' : 'bg-white border-slate-200 text-slate-700'
          }`}
        >
          프리뷰 모드
        </button>
        <button
          onClick={() => setShowCode(true)}
          className={`px-3 py-1.5 text-sm rounded-lg border transition ${
            showCode ? 'bg-emerald-50 border-emerald-200 text-emerald-700' : 'bg-white border-slate-200 text-slate-700'
          }`}
        >
          코드 + 프리뷰
        </button>
      </div>

      <div className="grid gap-4" style={{ gridTemplateColumns: gridTemplate }}>
        <div className="h-full">
          <ConceptCard tight />
        </div>
        {showCode && (
          <div className="h-full">
            <WorkshopColumns
              example="html/hidden-display-visibility"
              meta={meta}
              layout={({ CodePane }) => (
                <div className="h-full">
                  <CodePane />
                </div>
              )}
            />
          </div>
        )}
        <div className="h-full">
          <WorkshopColumns
            example="html/hidden-display-visibility"
            meta={meta}
            layout={({ PreviewPane }) => (
              <div className="h-full">
                <PreviewPane />
              </div>
            )}
          />
        </div>
      </div>
    </div>
  )
}

<LabLayout />
